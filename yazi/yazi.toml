# -----------------------------------------------------------------------------
# Configuración Principal de Yazi
# -----------------------------------------------------------------------------

[manager]
# Diseño: [Padre, Actual, Previsualización]
ratio          = [ 1, 3, 4 ]
sort_by        = "natural"
sort_sensitive = false
sort_reverse   = false
sort_dir_first = true
linemode       = "size"
show_hidden    = true
show_symlink   = true
scrolloff      = 5

[preview]
tab_size       = 2
max_width      = 600
max_height     = 900
cache_dir      = ""
image_filter   = "lanczos3"
image_quality  = 90
sixel_fraction = 15

# -----------------------------------------------------------------------------
# Abridores (Openers) - Define qué programas usar
# -----------------------------------------------------------------------------
[opener]
edit = [
    { run = 'nvim "$@"', block = true, desc = "Editar" },
]
play = [
    { run = 'mpv "$@"', orphan = true, for = "unix", desc = "Reproducir" },
]
image = [
    { run = 'imv "$@"', orphan = true, for = "unix", desc = "Ver Imagen" },
]
open = [
    { run = 'xdg-open "$@"', desc = "Abrir (Sistema)", for = "linux" },
]

# -----------------------------------------------------------------------------
# Reglas de Apertura - Asocia tipos de archivo a abridores
# -----------------------------------------------------------------------------
[open]
rules = [
    # Carpetas
    { name = "*/", use = [ "edit", "open" ] },
    
    # Texto y Código
    { mime = "text/*", use = [ "edit", "open" ] },
    { mime = "application/json", use = [ "edit", "open" ] },
    { mime = "*/javascript", use = [ "edit", "open" ] },
    { mime = "inode/x-empty", use = [ "edit", "open" ] },
    
    # Multimedia
    { mime = "image/*", use = [ "image", "open" ] },
    { mime = "video/*", use = [ "play", "open" ] },
    { mime = "audio/*", use = [ "play", "open" ] },
    
    # Fallback general
    { name = "*", use = [ "open", "edit" ] },
]

# -----------------------------------------------------------------------------
# Plugins (Previsualizadores y Fetchers)
# -----------------------------------------------------------------------------
[plugin]
fetchers = [
    { id = "mime", name = "*", run = "mime", if = "!mime", prio = "high" },
]

preloaders = [
    { mime = "image/*", run = "image" },
    { mime = "video/*", run = "video" },
    { mime = "font/*", run = "font" },
]

previewers = [
    { name = "*/", run = "folder", sync = true },
    { mime = "text/*", run = "code" },
    { mime = "*/xml", run = "code" },
    { mime = "*/javascript", run = "code" },
    { mime = "*/x-wine-extension-ini", run = "code" },
    { mime = "application/json", run = "json" },
    { mime = "image/*", run = "image" },
    { mime = "video/*", run = "video" },
    { mime = "font/*", run = "font" },
    { name = "*", run = "file" },
]
